{% extends "building/buildingDetails.html" %}

{% block title %}Flat Details{% endblock %}

{% block back %}
<a href="{% url 'buildingDetails' flat.building.id %}" class="text-accent transition">Back</a>
{% endblock %}


{% block content %}

<!-- Header Section -->
<div class="flex justify-between mb-8">

    <h1 class="text-2xl font-bold tracking-tight text-primary">
        Flat: {{ flat.flat_number }} - {{ flat.flat_type }}
    </h1>

    <div class="flex space-x-2">

        <!-- Flat Gallery -->
        <a href="{% url 'flatGallery' flat.building.id flat.id %}">
            <button class="px-3 py-1 rounded-lg shadow font-semibold transition btn-red">
                Gallery
            </button>
        </a>

        <!-- Edit Flat -->
        <a href="{% url 'editFlat' flat.building.id flat.id %}">
            <button class="px-3 py-1 rounded-lg shadow font-semibold transition btn-amber">
                Edit
            </button>
        </a>

    </div>

</div>



<!-- Tenant Header -->
{% if tenant %}
<div class="flex items-center justify-between mb-4">

    <h2 class="text-xl font-bold tracking-tight text-primary">Tenant Details</h2>

    <a href="{% url 'pastTenants' flat.building.id flat.id %}">
        <button class="px-4 py-2 rounded-lg shadow transition font-semibold text-sm btn-ash">
            View Past Tenants
        </button>
    </a>

</div>
{% endif %}






{% if tenant %}

<!-- Tenant Card -->
<div class="max-w-3xl mx-auto p-8 rounded-2xl shadow-xl bg-card border-dark">

    <!-- Tenant Name -->
    <div class="mb-6">
        <p class="text-sm font-semibold uppercase tracking-wide text-muted">Tenant Name</p>
        <p class="text-2xl font-bold mt-1 text-primary">{{ tenant.name }}</p>
    </div>

    <!-- Phone -->
    <div class="mb-6">
        <p class="text-sm font-semibold uppercase tracking-wide text-muted">Phone</p>
        <p class="text-lg mt-1 text-primary">{{ tenant.phone }}</p>
    </div>

    <!-- Rent -->
    <div class="mb-8">
        <p class="text-sm font-semibold uppercase tracking-wide text-muted">Monthly Rent</p>
        <p class="text-2xl font-bold mt-1 text-accent">â‚¹{{ tenant.flat_price }}</p>
    </div>

    <!-- Payment History -->
    <a href="{% url 'tenantPaymentHistory' flat.building.id flat.id %}">
        <button class="px-6 py-3 w-full rounded-lg shadow transition font-semibold btn-blue">
            Payment History
        </button>
    </a>

</div>


{% else %}

<div class="text-center text-muted mb-3">
    No active tenant currently assigned to this flat.
</div>

<!-- If NO ACTIVE Tenant -->
<div class="flex items-center justify-center gap-3 mb-4">

    <a href="{% url 'addTenant' flat.building.id flat.id %}">
        <button class="px-4 py-2 rounded-lg shadow transition font-semibold btn-blue">
            Add New Tenant
        </button>
    </a>

    <a href="{% url 'pastTenants' flat.building.id flat.id %}">
        <button class="px-4 py-2 rounded-lg shadow transition font-semibold btn-ash">
            View Past Tenants
        </button>
    </a>

</div>

{% endif %}




<!-- Action Buttons (only if tenant exists) -->
{% if tenant %}
<div class="flex items-center justify-center gap-3 mt-6 mb-8">

    <!-- Remove Tenant -->
    <a href="{% url 'removeTenant' flat.building.id flat.id %}">
        <button class="px-4 py-2 rounded-lg shadow transition font-semibold btn-red">
            Remove
        </button>
    </a>

    <!-- Add Another Tenant -->
    <a href="{% url 'addTenant' flat.building.id flat.id %}">
        <button class="px-4 py-2 rounded-lg shadow transition font-semibold btn-blue">
            Add New Tenant
        </button>
    </a>

</div>
{% endif %}


{% endblock %}
