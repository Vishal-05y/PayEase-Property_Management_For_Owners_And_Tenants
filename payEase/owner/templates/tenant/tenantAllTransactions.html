{% extends "base/owner_layout.html" %}

{% block title %}All Transactions{% endblock %}

{% block navbar %}
<a href="{% url 'ownerDashboard' %}" class="text-white hover:text-cyan-300">Dashboard</a>
<a href="{% url 'logoutOwner' %}">
    <button class="px-4 py-2 bg-red-700 text-white rounded">Logout</button>
</a>
{% endblock %}

{% block content %}

<h1 class="text-3xl font-bold text-cyan-900 mb-6">
    All Transactions — {{ tenant.name }}
</h1>

<p class="text-gray-700 mb-4">
    <strong>Flat:</strong> {{ flat.flat_number }}<br>
    <strong>Building:</strong> {{ building.name }}<br>
    <strong>Status:</strong>
    {% if tenant.is_active %}
        <span class="text-green-700 font-semibold">Active</span>
    {% else %}
        <span class="text-red-700 font-semibold">Inactive</span>
    {% endif %}
</p>

    <table class="w-full text-left border-1">
        <thead class="bg-cyan-700 text-white">
            <tr>
                <th class="py-3 px-4">Month</th>
                <th class="py-3 px-4">Amount</th>
                <th class="py-3 px-4">Payment ID</th>
                <th class="py-3 px-4">Date</th>
                <th class="py-3 px-4">Status</th>
            </tr>
        </thead>

        <tbody>
        {% if payments %}
            {% for p in payments %}
                <tr class="border-b hover:bg-cyan-50">
                    <td class="py-3 px-4">{{ p.month }}</td>
                    <td class="py-3 px-4">₹{{ p.amount }}</td>
                    <td class="py-3 px-4 text-sm">{{ p.payment_id }}</td>
                    <td class="py-3 px-4 text-sm">{{ p.date_paid|date:"F j, Y" }}</td>

                    <td class="py-3 px-4">
                        {% if p.status == "PAID" %}
                            <span class="px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-semibold">PAID</span>
                        {% else %}
                            <span class="px-2 py-1 bg-red-200 text-red-800 rounded text-xs font-semibold">FAILED</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="5" class="text-center py-6 text-gray-600">No payment records found.</td>
            </tr>
        {% endif %}
        </tbody>
    </table>

<a href="{% url 'pastTenants' building.id flat.id %}">
    <button class="mt-6 px-5 py-3 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800">
        Back to Past Tenants
    </button>
</a>

{% endblock %}
