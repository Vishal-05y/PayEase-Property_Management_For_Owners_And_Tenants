{% extends "base/tenant_layout.html" %}

{% block title %}Transactions{% endblock %}

{% block content %}

<h1 class="text-3xl font-bold text-cyan-900 mb-6">
    Transactions for Flat {{ flat.flat_number }}
</h1>

<p class="text-gray-700 mb-4">
    <strong>Building:</strong> {{ building.name }}<br>
    <strong>Owner:</strong> {{ owner.name }} ({{ owner.phone }})
</p>

<table class="w-full text-left border-collapse ">
    <thead class="bg-cyan-700 text-white">
        <tr>
            <th class="py-3 px-4 text-sm font-semibold">Month</th>
            <th class="py-3 px-4 text-sm font-semibold">Amount</th>
            <th class="py-3 px-4 text-sm font-semibold">Payment ID</th>
            <th class="py-3 px-4 text-sm font-semibold">Date</th>
            <th class="py-3 px-4 text-sm font-semibold">Status</th>
        </tr>
    </thead>

    <tbody>
    {% if payments %}
        {% for p in payments %}
            <tr class="border-b hover:bg-cyan-50">
                <td class="py-3 px-4">{{ p.month }}</td>
                <td class="py-3 px-4">â‚¹{{ p.amount }}</td>
                <td class="py-3 px-4 text-sm">{{ p.payment_id }}</td>
                <td class="py-3 px-4 text-sm">{{ p.date_paid|date:"F j, Y" }}</td>

                <td class="py-3 px-4">
                    {% if p.status == "PAID" %}
                        <span class="px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-semibold">
                            PAID
                        </span>
                    {% else %}
                        <span class="px-2 py-1 bg-red-200 text-red-800 rounded text-xs font-semibold">
                            FAILED
                        </span>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="5" class="text-center py-6 text-gray-600">
                No payments found for this flat.
            </td>
        </tr>
    {% endif %}
    </tbody>
</table>

<a href="{% url 'allFlats' %}">
    <button class="mt-6 px-5 py-3 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800">
        Back to Flats
    </button>
</a>

{% endblock %}
