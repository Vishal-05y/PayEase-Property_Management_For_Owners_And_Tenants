{% extends "base/tenant_layout.html" %}

{% block title %}Rent Payment History{% endblock %}

{% block navbar %}
<a href="{% url 'tenantDashboard' %}" class="hover-accent transition">Dashboard</a>
<a href="{% url 'logoutTenant' %}">
    <button class="px-2 py-1 btn-red rounded transition">
        Logout
    </button>
</a>
{% endblock %}

{% block content %}

<h1 class="text-3xl font-bold text-primary mt-5 mb-6">
    Payment History
</h1>

<!-- WRAP TABLE FOR MOBILE SCROLL -->
<div class="overflow-x-auto rounded-xl border border-dark bg-card shadow">

    <table class="min-w-full text-left border-collapse">

        <!-- HEADER (same style as previous) -->
        <thead class="bg-[#204066] text-white">
            <tr>
                <th class="py-3 px-4 text-sm font-semibold">Month</th>
                <th class="py-3 px-4 text-sm font-semibold">Amount</th>
                <th class="py-3 px-4 text-sm font-semibold">Payment ID</th>
                <th class="py-3 px-4 text-sm font-semibold">Date</th>
                <th class="py-3 px-4 text-sm font-semibold">Status</th>
            </tr>
        </thead>

        <tbody>

        {% if payments %}
            {% for p in payments %}
            <tr class="border-b border-dark hover:bg-[#1d242d] transition">

                <td class="py-3 px-4 text-primary font-medium">
                    {{ p.month }}
                </td>

                <td class="py-3 px-4 text-primary">
                    â‚¹{{ p.amount }}
                </td>

                <td class="py-3 px-4 text-muted text-sm">
                    {{ p.payment_id }}
                </td>

                <td class="py-3 px-4 text-muted text-sm">
                    {{ p.date_paid|date:"F j, Y" }}
                </td>

                <td class="py-3 px-4">
                    {% if p.status == "PAID" %}
                        <span class="px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-semibold">
                            PAID
                        </span>
                    {% else %}
                        <span class="px-2 py-1 bg-red-200 text-red-800 rounded text-xs font-semibold">
                            FAILED
                        </span>
                    {% endif %}
                </td>

            </tr>
            {% endfor %}
        
        {% else %}
            <tr>
                <td colspan="5" class="py-6 text-center text-muted">
                    No payment records found.
                </td>
            </tr>
        {% endif %}
        
        </tbody>

    </table>
</div>

{% endblock %}
