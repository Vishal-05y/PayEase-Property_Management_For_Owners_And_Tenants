{% extends "base/tenant_layout.html" %}

{% block title %}Flat Gallery{% endblock %}

{% block navbar %}
<a href="{% url 'tenantDashboard' %}" class="hover-accent text-primary">Dashboard</a>
<a href="{% url 'logoutTenant' %}">
    <button class="px-2 py-1 btn-red rounded">Logout</button>
</a>
{% endblock %}

{% block content %}

<!-- Title -->
<h1 class="text-4xl font-extrabold text-primary mt-4 mb-8 text-center">
    Flat {{ flat.flat_number }} ({{ flat.flat_type }}) — Gallery
</h1>

<!-- Dark Theme Gallery Card -->
    {% if images %}
    <!-- LARGE SLIDER -->
    <div class="relative w-full h-96 rounded-xl overflow-hidden shadow-lg">

        <img id="sliderLargeImage"
             src="{{ images.0.image.url }}"
             class="w-full h-full object-contain bg-black rounded-xl">

        <!-- Prev Button -->
        <button onclick="prevSlide()"
                class="absolute left-3 top-1/2 -translate-y-1/2
                       bg-black bg-opacity-40 text-white px-4 py-2 text-3xl rounded-full 
                       hover:bg-opacity-70 transition">
            ❮
        </button>

        <!-- Next Button -->
        <button onclick="nextSlide()"
                class="absolute right-3 top-1/2 -translate-y-1/2
                       bg-black bg-opacity-40 text-white px-4 py-2 text-3xl rounded-full 
                       hover:bg-opacity-70 transition">
            ❯
        </button>
    </div>

    {% else %}
        <p class="text-muted text-center text-lg">No images available.</p>
    {% endif %}

<!-- Slider Script -->
<script>
let sliderImages = [
    {% for img in images %}
        "{{ img.image.url }}",
    {% endfor %}
];

let sliderIndex = 0;

// Update displayed image
function updateLarge() {
    document.getElementById("sliderLargeImage").src = sliderImages[sliderIndex];
}

// Next / Prev controls
function nextSlide() {
    sliderIndex = (sliderIndex + 1) % sliderImages.length;
    updateLarge();
}

function prevSlide() {
    sliderIndex = (sliderIndex - 1 + sliderImages.length) % sliderImages.length;
    updateLarge();
}
</script>

{% endblock %}
